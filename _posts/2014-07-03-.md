---
layout: post
title: ''
date: 2014-07-03 13:25:29.000000000 -04:00
categories: []
tags: []
status: draft
type: post
published: false
meta:
  _wpas_skip_facebook: '1'
  _wpas_skip_google_plus: '1'
  _wpas_skip_twitter: '1'
  _wpas_skip_linkedin: '1'
  _wpas_skip_tumblr: '1'
  _wpas_skip_path: '1'
author:
  login: kmassada
  email: kmassada@gmail.com
  display_name: kmassada
  first_name: ''
  last_name: ''
excerpt: !ruby/object:Hpricot::Doc

---
<p>#!/usr/bin/python<br />
import re<br />
import sys<br />
from os import listdir<br />
from os.path import isfile, isdir, join<br />
from datetime import date</p>
<p>mypath="/nfs/mts/data/whatami"<br />
for f in listdir(mypath):<br />
	fullpath=join(mypath,f)<br />
	if isdir(fullpath):<br />
		today=date.today()<br />
		today=today.strftime("%Y.%m.%d")<br />
		summary=join(fullpath,"summary."+today)<br />
		if isfile(summary):<br />
			files=open(summary, "r").read()<br />
			#search arch<br />
			#pattern=re.compile(r"""OS RELEASE: Red Hat Enterprise Linux Server release (?P.*)\((?:.*)\n(?:.*)APPLICATION ARCH: (?P\w+)""", re.MULTILINE| re.DOTALL)<br />
			pattern=re.compile(r"""OS RELEASE: Red Hat Enterprise Linux Server release (?P.*)\((?:.*)\n(?:.*)APPLICATION ARCH: (?P\w+)\n(?:.*)MODEL: ProLiant (?P\w+).*""", re.MULTILINE| re.DOTALL)<br />
			for match in pattern.finditer(files):<br />
				#output = "%s,%s,%s" % (f,match.group('version'), match.group('arch'))<br />
				output = "%s,%s,%s,%s" % (f,match.group('version'), match.group('arch'),match.group('model'))<br />
				print output </p>
